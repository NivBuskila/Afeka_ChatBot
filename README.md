# APEX Afeka ChatBot ğŸ¤–

> **An intelligent AI-powered chatbot designed to help Afeka College students easily access and understand academic regulations and information.**

[![FastAPI](https://img.shields.io/badge/FastAPI-0.104.1-009688?style=flat-square&logo=fastapi)](https://fastapi.tiangolo.com/)
[![React](https://img.shields.io/badge/React-18.2.0-61DAFB?style=flat-square&logo=react)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0.2-3178C6?style=flat-square&logo=typescript)](https://www.typescriptlang.org/)
[![Supabase](https://img.shields.io/badge/Supabase-2.39.7-3ECF8E?style=flat-square&logo=supabase)](https://supabase.com/)
[![Docker](https://img.shields.io/badge/Docker-24.0.6-2496ED?style=flat-square&logo=docker)](https://www.docker.com/)

## ğŸ“– ×ª×•×›×Ÿ ×¢× ×™×™× ×™×

- [×ª×™××•×¨ ×”×¤×¨×•×™×§×˜](#×ª×™××•×¨-×”×¤×¨×•×™×§×˜)
- [××“×¨×™×›×œ×•×ª ×”××¢×¨×›×ª](#××“×¨×™×›×œ×•×ª-×”××¢×¨×›×ª)
- [×”×ª×§× ×” ×•×”×¤×¢×œ×” ××”×™×¨×”](#×”×ª×§× ×”-×•×”×¤×¢×œ×”-××”×™×¨×”)
- [××‘× ×” ×”×¤×¨×•×™×§×˜](#××‘× ×”-×”×¤×¨×•×™×§×˜)
- [×˜×›× ×•×œ×•×’×™×•×ª](#×˜×›× ×•×œ×•×’×™×•×ª)
- [×¤×™×ª×•×— ××§×•××™](#×¤×™×ª×•×—-××§×•××™)
- [×‘×“×™×§×•×ª](#×‘×“×™×§×•×ª)
- [×¤×¨×™×¡×”](#×¤×¨×™×¡×”)
- [×¦×•×•×ª ×”×¤×™×ª×•×—](#×¦×•×•×ª-×”×¤×™×ª×•×—)
- [×ª×¨×•××” ×œ×¤×¨×•×™×§×˜](#×ª×¨×•××”-×œ×¤×¨×•×™×§×˜)

## ğŸ¯ ×ª×™××•×¨ ×”×¤×¨×•×™×§×˜

APEX Afeka ChatBot ×”×•× ××¢×¨×›×ª ×—×›××” ××‘×•×¡×¡×ª ×‘×™× ×” ××œ××›×•×ª×™×ª ×©××˜×¨×ª×” ×œ×¡×™×™×¢ ×œ×¡×˜×•×“× ×˜×™× ×‘××›×œ×œ×ª ××¤×§×” ×œ×§×‘×œ ××™×“×¢ ××”×™×¨ ×•××“×•×™×§ ×¢×œ ×ª×§× ×•×Ÿ ××§×“××™, × ×”×œ×™× ×•××™×“×¢ ×¨×œ×•×•× ×˜×™ × ×•×¡×£. ×”××¢×¨×›×ª ××¡×¤×§×ª ×—×•×•×™×™×ª ××©×ª××© ××ª×§×“××ª ×¢× ×ª××™×›×” ×¨×‘-×œ×©×•× ×™×ª (×¢×‘×¨×™×ª ×•×× ×’×œ×™×ª) ×•×××©×§ × ×™×”×•×œ ××ª×§×“× ×œ×× ×”×œ×™ ×”××¢×¨×›×ª.

### âœ¨ ×ª×›×•× ×•×ª ×¢×™×§×¨×™×•×ª

- ğŸ¤– **×¦'××˜ ×‘×•×˜ ×—×›×** - ×ª×’×•×‘×•×ª ××•×ª×××•×ª ×•××“×•×™×§×•×ª ×‘×××¦×¢×•×ª RAG (Retrieval Augmented Generation)
- ğŸ“š **× ×™×”×•×œ ××¡××›×™×** - ×”×¢×œ××”, × ×™×”×•×œ ×•×¢×™×‘×•×“ ××¡××›×™× ××§×“××™×™×
- ğŸ“Š **×“×©×‘×•×¨×“ × ×™×”×•×œ** - ×××©×§ ××ª×§×“× ×œ×× ×”×œ×™ ×”××¢×¨×›×ª ×¢× ×× ×œ×™×˜×™×§×”
- ğŸŒ **×¨×‘-×œ×©×•× ×™** - ×ª××™×›×” ××œ××” ×‘×¢×‘×¨×™×ª ×•×× ×’×œ×™×ª
- ğŸ” **××‘×˜×—×” ××ª×§×“××ª** - ××™××•×ª ××©×ª××©×™× ×•×‘×§×¨×ª ×’×™×©×” ×“×¨×š Supabase
- ğŸ“± **Responsive Design** - ×××©×§ ××ª××™× ×œ×›×œ ×¡×•×’×™ ×”××›×©×™×¨×™×
- âš¡ **×‘×™×¦×•×¢×™× ×’×‘×•×”×™×** - ××“×¨×™×›×œ×•×ª microservices ××•×ª×××ª ×œ×¢×•××¡×™× ×’×‘×•×”×™×

## ğŸ—ï¸ ××“×¨×™×›×œ×•×ª ×”××¢×¨×›×ª

```mermaid
graph TB
    U[××©×ª××©] --> F[Frontend - React/TypeScript]
    F --> B[Backend API - FastAPI]
    B --> AI[AI Service - Python/Flask]
    B --> DB[(Supabase Database)]
    B --> S3[Supabase Storage]
    AI --> RAG[RAG System]
    RAG --> VDB[(Vector Database)]
```

## ğŸš€ ×”×ª×§× ×” ×•×”×¤×¢×œ×” ××”×™×¨×”

### ×“×¨×™×©×•×ª ××•×§×“××•×ª

- **Docker & Docker Compose** - [×”×•×¨×“×”](https://www.docker.com/products/docker-desktop/)
- **Git** - [×”×•×¨×“×”](https://git-scm.com/downloads)
- **××¤×ª×— Supabase** - ×œ×¦×•×¨×š ×”×ª×—×‘×¨×•×ª ×œ××¡×“ ×”× ×ª×•× ×™×

### ×”×¤×¢×œ×” ×¢× Docker (××•××œ×¥)

```bash
# ×©×›×¤×•×œ ×”×¤×¨×•×™×§×˜
git clone https://github.com/your-organization/afeka-chatbot.git
cd afeka-chatbot

# ×”×’×“×¨×ª ××©×ª× ×™ ×¡×‘×™×‘×”
export SUPABASE_KEY=your_supabase_key_here  # Linux/Mac
$env:SUPABASE_KEY="your_supabase_key_here"  # Windows PowerShell

# ×”×¤×¢×œ×ª ×”××¢×¨×›×ª
docker-compose up -d

# ×œ×¤×™×ª×•×— ×¢× hot reloading
docker-compose -f docker-compose.dev.yml up -d
```

### ×’×™×©×” ×œ××¢×¨×›×ª

- **Frontend**: http://localhost:80 (×™×™×¦×•×¨) ××• http://localhost:5173 (×¤×™×ª×•×—)
- **Backend API**: http://localhost:8000
- **AI Service**: http://localhost:5000
- **API Documentation**: http://localhost:8000/docs

## ğŸ“ ××‘× ×” ×”×¤×¨×•×™×§×˜

```
afeka-chatbot/
â”œâ”€â”€ src/                           # ×§×•×“ ×”××§×•×¨ ×”×¨××©×™
â”‚   â”œâ”€â”€ frontend/                  # ×××©×§ ×”××©×ª××© (React/TypeScript)
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/        # ×¨×›×™×‘×™ React
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Chat/         # ×¨×›×™×‘×™ ×”×¦'××˜
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard/    # ×“×©×‘×•×¨×“ × ×™×”×•×œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Login/        # ××¢×¨×›×ª ×”×ª×—×‘×¨×•×ª
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ui/           # ×¨×›×™×‘×™ UI ×‘×¡×™×¡×™×™×
â”‚   â”‚   â”‚   â”œâ”€â”€ contexts/         # React Contexts
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/            # Custom Hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ services/         # ×©×™×¨×•×ª×™ API
â”‚   â”‚   â”‚   â”œâ”€â”€ types/            # TypeScript Types
â”‚   â”‚   â”‚   â””â”€â”€ utils/            # ×¤×•× ×§×¦×™×•×ª ×¢×–×¨
â”‚   â”‚   â”œâ”€â”€ public/               # ×§×‘×¦×™× ×¡×˜×˜×™×™×
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”œâ”€â”€ backend/                   # ×©×¨×ª API (FastAPI)
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”‚   â”œâ”€â”€ api/              # × ×§×•×“×•×ª ×§×¦×” API
â”‚   â”‚   â”‚   â”œâ”€â”€ core/             # ×œ×•×’×™×§×” ××¨×›×–×™×ª
â”‚   â”‚   â”‚   â”œâ”€â”€ models/           # ××•×“×œ×™ × ×ª×•× ×™×
â”‚   â”‚   â”‚   â”œâ”€â”€ services/         # ×©×™×¨×•×ª×™ ×¢×¡×§
â”‚   â”‚   â”‚   â””â”€â”€ repositories/     # ×’×™×©×” ×œ× ×ª×•× ×™×
â”‚   â”‚   â”œâ”€â”€ main.py               # × ×§×•×“×ª ×›× ×™×¡×”
â”‚   â”‚   â””â”€â”€ requirements.txt
â”‚   â”œâ”€â”€ ai/                       # ×©×™×¨×•×ª AI (Python/Flask)
â”‚   â”‚   â”œâ”€â”€ services/             # ×©×™×¨×•×ª×™ AI ×•-RAG
â”‚   â”‚   â”œâ”€â”€ core/                 # ×× ×•×¢×™ AI
â”‚   â”‚   â”œâ”€â”€ utils/                # ×›×œ×™ ×¢×–×¨
â”‚   â”‚   â””â”€â”€ app.py
â”‚   â””â”€â”€ tests/                    # ×‘×“×™×§×•×ª ××•×˜×•××˜×™×•×ª
â”‚       â”œâ”€â”€ backend/              # ×‘×“×™×§×•×ª Backend
â”‚       â””â”€â”€ frontend/             # ×‘×“×™×§×•×ª Frontend
â”œâ”€â”€ supabase/                     # ×ª×¦×•×¨×ª ××¡×“ × ×ª×•× ×™×
â”‚   â”œâ”€â”€ migrations/               # ×¡×§×¨×™×¤×˜×™ migration
â”‚   â””â”€â”€ config/                   # ×ª×¦×•×¨×ª Supabase
â”œâ”€â”€ RAG_Test_Pro/                 # ××¢×¨×›×ª ×‘×“×™×§×•×ª RAG
â”œâ”€â”€ docker-compose.yml            # ×ª×¦×•×¨×ª Docker ×œ×™×™×¦×•×¨
â”œâ”€â”€ docker-compose.dev.yml        # ×ª×¦×•×¨×ª Docker ×œ×¤×™×ª×•×—
â””â”€â”€ README.md
```

# Afeka Regulations ChatBot ğŸ¤–

An AI-powered chatbot designed to help Afeka College students easily access and understand academic regulations and information.

## ğŸ³ Docker Quickstart

The easiest way to run the entire application is using Docker Compose:

```bash
# Set Supabase key environment variable (required)
export SUPABASE_KEY=your_key_here  # Linux/Mac
# OR
$env:SUPABASE_KEY="your_key_here"  # Windows PowerShell

# Start all services
docker-compose up -d

# For development environment with hot reloading
docker-compose -f docker-compose.dev.yml up -d
```

Access the application:

- Frontend: http://localhost:80 (production) or http://localhost:5173 (development)
- Backend API: http://localhost:8000
- AI Service: http://localhost:5000

### Docker Commands

```bash
# View running containers
docker-compose ps

# View logs
docker-compose logs frontend
docker-compose logs backend
docker-compose logs ai-service

# Rebuild specific service
docker-compose build frontend

# Stop all services
docker-compose down

# Cleanup everything
docker-compose down --rmi all --volumes
```

## ğŸ‘‹ New Team Members - Start Here!

### One-Time Setup Requirements

1. **Install Docker and Docker Compose**

   - Download from [docker.com](https://www.docker.com/products/docker-desktop/)
   - Verify installation: `docker --version` and `docker-compose --version`

2. **Install Git**

   - Download from [git-scm.com](https://git-scm.com/downloads)

3. **Get Supabase Access**
   - Request access key from team lead
   - Set as environment variable before running Docker

### Manual Setup (Alternative to Docker)

#### Frontend Setup

```bash
cd src/frontend
npm install
npm run dev
```

#### Backend Setup

```bash
cd src/backend
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows
pip install -r requirements.txt
uvicorn main:app --reload
```

#### AI Service Setup

```bash
cd src/ai
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows
pip install -r requirements.txt
python app.py  # Now runs minimal AI service for key management
```

## ğŸ“ Project Structure

```
afeka-chatbot/
â”œâ”€â”€ config/               # ×§×‘×¦×™ ×ª×¦×•×¨×” ×•×¡×‘×™×‘×”
â”‚   â”œâ”€â”€ .env              # ×”×’×“×¨×•×ª ×¡×‘×™×‘×” ×¤×¢×™×œ×•×ª
â”‚   â””â”€â”€ .env.example      # ×“×•×’××” ×œ×”×’×“×¨×•×ª ×¡×‘×™×‘×”
â”œâ”€â”€ docker/               # ×§×‘×¦×™ Docker
â”‚   â”œâ”€â”€ docker-compose.yml        # ×”×’×“×¨×•×ª Docker ×œ×¡×‘×™×‘×ª ×™×™×¦×•×¨
â”‚   â”œâ”€â”€ docker-compose.dev.yml    # ×”×’×“×¨×•×ª Docker ×œ×¡×‘×™×‘×ª ×¤×™×ª×•×—
â”‚   â””â”€â”€ nginx.conf                # ×§×•× ×¤×™×’×•×¨×¦×™×™×ª Nginx
â”œâ”€â”€ scripts/              # ×¡×§×¨×™×¤×˜×™ ×”×¤×¢×œ×”
â”‚   â”œâ”€â”€ run_full_project.bat      # ×”×¤×¢×œ×ª ×”×¤×¨×•×™×§×˜ ×”××œ×
â”‚   â”œâ”€â”€ run_frontend.bat          # ×”×¤×¢×œ×ª ×”×¤×¨×•× ×˜×× ×“ ×‘×œ×‘×“
â”‚   â”œâ”€â”€ run_chat_gui.bat          # ×”×¤×¢×œ×ª ×××©×§ ×¦'××˜ ×’×¨×¤×™
â”‚   â””â”€â”€ run_gemini_test.bat       # ×‘×“×™×§×ª ×—×™×‘×•×¨ ×œ-Gemini API
â”œâ”€â”€ src/                  # ×§×•×“ ×”××§×•×¨
â”‚   â”œâ”€â”€ ai/               # ×©×™×¨×•×ª ×”-AI
â”‚   â”œâ”€â”€ backend/          # ×©×™×¨×•×ª ×”×‘×§×× ×“
â”‚   â”œâ”€â”€ frontend/         # ×××©×§ ×”××©×ª××©
â”‚   â”œâ”€â”€ config/           # ×§×‘×¦×™ ×§×•× ×¤×™×’×•×¨×¦×™×” ×¤× ×™××™×™×
â”‚   â””â”€â”€ supabase/         # ×§×‘×¦×™× ×”×§×©×•×¨×™× ×œ-Supabase
â”œâ”€â”€ data/                 # × ×ª×•× ×™× ×•×§×‘×¦×™ ××™×“×¢
â”œâ”€â”€ docs/                 # ×ª×™×¢×•×“ ×”×¤×¨×•×™×§×˜
â”œâ”€â”€ tests/                # ×‘×“×™×§×•×ª
â””â”€â”€ run.bat               # ×¡×§×¨×™×¤×˜ ×”×¤×¢×œ×” ××¨×›×–×™

```

## ğŸ› ï¸ Technology Stack

### Frontend

- React with TypeScript
- Vite for development
- Tailwind CSS for styling
- i18n for internationalization (Hebrew/English)

### Backend

- Python with FastAPI
- Async HTTP with httpx
- Supabase for data storage

### AI Service

- Python with Flask
- NLP capabilities

### Infrastructure

- Docker for containerization
- Nginx as reverse proxy
- Supabase for database and storage

## Git Workflow

1. Create feature branch
2. Make changes
3. Test locally with Docker
4. Create pull request
5. Wait for review

## ğŸ‘¥ Team

- Niv Buskila
- Omri Roter
- Amitay Manor

## ğŸ†˜ Common Issues and Solutions

1. **Supabase Key Error**

   - Ensure SUPABASE_KEY environment variable is set

2. **Services Can't Communicate**

   - Check if all containers are running: `docker-compose ps`
   - Verify network configuration in docker-compose.yml

3. **Frontend Build Issues**

   - TypeScript errors can be bypassed with VITE_SKIP_TS_CHECK=true

4. **"Address Already In Use" Error**

   - Check if port is already in use: `netstat -ano | findstr 8000` (Windows) or `lsof -i :8000` (Mac/Linux)
   - Stop the service using that port

5. **Changes Not Reflecting**
   - In production mode, rebuild container: `docker-compose build frontend`
   - In development mode, changes should apply automatically

## ğŸ“± Contact

- Technical questions: Create an Issue
- Urgent matters: [Team Lead Contact]

## ğŸ“š Learning Resources

- [React Official Guide](https://react.dev)
- [TypeScript for Beginners](https://www.typescriptlang.org/docs/handbook/typescript-from-scratch.html)
- [FastAPI Tutorial](https://fastapi.tiangolo.com/tutorial/)
- [Git Basics](https://www.atlassian.com/git/tutorials/what-is-version-control)

## âš¡ Quick Start Tips

1. Start with basic technology learning
2. Read existing code to understand structure
3. Make small changes first
4. Ask questions when needed - no question is silly!

## ğŸ§ª Testing

- Write tests for new features
- Run existing tests before pushing
- Use `npm test` for frontend
- Use `pytest` for backend

## ğŸ“¦ Deployment

- Frontend builds with `npm run build`
- Backend deploys with uvicorn
- MongoDB should be running

## ğŸ”„ CI/CD

- Automatic tests run on push
- Review required for merging
- Automatic deployment on main branch

---

ğŸ’¡ Remember: Everyone was a beginner once. Don't hesitate to ask questions!

## Docker Setup and Usage

### Prerequisites

- Docker and Docker Compose installed
- Git (to clone the repository)

### Setup Instructions

1. Clone the repository

```bash
git clone [repository-url]
cd Afeka_ChatBot
```

2. Configure environment variables

```bash
# The .env file is already configured with Supabase URL
# You only need to add your Supabase anon key
```

Edit the `.env` file and replace `your_supabase_anon_key_here` with your actual Supabase anon key.

3. Build and start the Docker containers

```bash
docker-compose up --build
```

4. Access the application

- Frontend: http://localhost:80
- Backend API (Python): http://localhost:8000
- AI Service: http://localhost:5000

### Development Mode

For development with hot-reloading and volume mounts:

```bash
docker-compose -f docker-compose.dev.yml up --build
```

This configuration mounts local directories to containers, allowing real-time code changes without rebuilding containers.

In development mode the frontend will be available on http://localhost:3000 instead of port 80.

### Troubleshooting Common Issues

#### Frontend Build Errors

The system is configured to continue working even if there are TypeScript errors. If you need to fix the TypeScript issues:

1. Enter the frontend container:

```bash
docker-compose exec frontend sh
```

2. Run TypeScript checks:

```bash
npm run tsc
```

#### AI Service Issues

If you experience issues with the AI service, try these steps:

1. Check service logs:

```bash
docker-compose logs ai-service
```

2. Restart just the AI service:

```bash
docker-compose restart ai-service
```

#### Communication Between Services

If services can't communicate with each other:

- Backend->AI: Check that AI_SERVICE_URL is set to "http://ai-service:5000"
- Frontend->Backend: Verify that VITE_BACKEND_URL is set correctly

### Additional Commands

#### Run in detached mode

```bash
docker-compose up -d
```

#### View logs

```bash
docker-compose logs -f
```

#### Stop containers

```bash
docker-compose down
```

#### Access container shell

```bash
# For Python containers (backend, ai-service)
docker-compose exec backend sh
docker-compose exec ai-service sh

# For Node.js container (frontend)
docker-compose exec frontend sh
```

#### Remove volumes (will delete persistent data)

```bash
docker-compose down -v
```

## Project Structure

- `frontend/`: Web interface (React/TypeScript)
- `backend/`: API and business logic (Python/FastAPI)
- `ai/`: AI models and processing (Python/Flask)
- `supabase/`: Database schema and migrations

## Technology Stack in Docker Environment

- Frontend: React with TypeScript, Vite, Tailwind CSS
- Backend: Python with FastAPI
- AI Service: Python with Flask
- Database: Supabase

## Supabase Configuration

The application is configured to connect to your Supabase project.

**âš ï¸ Security Note**: Supabase URL and keys are configured through environment variables in `.env` files. Never hardcode these values in your source code.

### Existing Tables

The following tables exist in the Supabase database:

- `document_analytics`: Analytics data for document interactions
- `documents`: Main document storage
- `documents_with_logging`: Documents with additional logging information
- `security_events`: Security-related events
- `users`: User information and permissions

If you need to access conversation history, ensure you add a `conversations` table with the following schema:

- `id`: UUID (primary key)
- `user_id`: String
- `message`: Text
- `response`: JSON
- `created_at`: Timestamp with time zone

## API Endpoints

### Backend (FastAPI)

- `GET /health`: Health check
- `POST /api/chat`: Process chat messages
- `GET /api/documents`: Get documents
- `POST /api/documents`: Create a new document

### AI Service (Flask - Minimal)

- `GET /`: Health check
- `GET /status`: Key management status for DatabaseKeyManager
- `GET /api/key-status`: Alternative key status endpoint

## Future Enhancements

### RAG (Retrieval Augmented Generation) Implementation

The system is designed with placeholders for a future RAG implementation that will provide accurate responses based on institutional documents:

1. **Document Storage**: Already implemented through Supabase, allowing admin users to upload regulatory documents
2. **AI Service**: Currently provides basic placeholder responses, but designed to be extended with RAG capabilities
3. **Frontend Integration**: UI already set up for chat interactions with backend API

When implemented, the RAG system will:

- Extract knowledge from uploaded documents
- Build semantic vector representations of document content
- Match user queries to the most relevant document sections
- Generate accurate, context-aware responses based on the institution's own documentation

This approach will ensure that responses are factually accurate, up-to-date, and specific to the institution's regulations without requiring constant manual updates to response templates.

## Developer Setup Guide

This guide will help you set up the Afeka ChatBot project on your local machine for development.

### Prerequisites

1. **Node.js** (v18 or later)
2. **Python** (v3.10 or later)
3. **Git**
4. **Supabase** account (for database access)

### Getting Started

#### Clone the Repository

1. Open a terminal and run:

   ```bash
   git clone https://github.com/your-org/afeka-chatbot.git
   cd afeka-chatbot
   ```

2. Checkout the development branch:
   ```bash
   git checkout "Omri's"
   ```
   Note: The quotes are important due to the apostrophe in the branch name.

#### Backend Setup

1. Create and activate a Python virtual environment:

   ```bash
   # Windows
   python -m venv backend_venv
   backend_venv\Scripts\activate

   # macOS/Linux
   python -m venv backend_venv
   source backend_venv/bin/activate
   ```

2. Install Python dependencies:

   ```bash
   cd src/backend
   pip install -r requirements.txt
   ```

3. Set up environment variables:
   - Create a `.env` file in the `src/backend` directory
   - Add the following variables (replace with actual values):
   ```
   SUPABASE_URL=your_supabase_url
   SUPABASE_KEY=your_supabase_key
   ```

#### Frontend Setup

1. Install Node.js dependencies:

   ```bash
   cd src/frontend
   npm install
   ```

2. Set up environment variables:
   - Create a `.env` file in the `src/frontend` directory
   - Add the following variables (replace with actual values):
   ```
   VITE_SUPABASE_URL=your_supabase_url
   VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
   ```

### Running the Application

#### Option 1: Run Frontend and Backend Separately

1. **Backend**:

   ```bash
   # From the project root, with virtual environment activated
   cd src/backend
   python main.py  # Runs the main FastAPI backend
   ```

   The backend will be available at `http://localhost:8000`

2. **AI Service**:

   ```bash
   # In a new terminal, from the project root
   cd src/ai
   python app.py  # Runs minimal AI service for key management
   ```

   The AI service will be available at `http://localhost:5000`

3. **Frontend**:
   ```bash
   # In a new terminal
   cd src/frontend
   npm run dev
   ```
   The frontend will be available at `http://localhost:5174`

#### Option 2: Use the Batch Scripts (Windows Only)

For convenience, you can use the included batch scripts:

1. To run the frontend only:

   ```
   run_frontend.bat
   ```

2. To run both frontend and backend:
   ```
   run_full_project.bat
   ```

### Working with Translations

The application supports both English and Hebrew:

- Translation files are located in `src/frontend/src/i18n/locales/`
- When adding new text to the UI, ensure you add the translations to both language files
- Use direct translation values (not translation keys) in components that show language keys

### Version Control Guidelines

1. Create a new branch for each feature:

   ```bash
   git checkout -b feature/your-feature-name
   ```

2. Commit messages should be in English and descriptive

3. Before pushing, ensure your code is properly formatted and lint-free

4. Push to your branch and create a pull request to the main development branch

### Troubleshooting

If you encounter any issues:

1. Ensure all dependencies are installed
2. Check that environment variables are correctly set
3. Make sure Supabase is properly configured
4. Restart the development servers

For database-related issues, check the Supabase console for any errors.

### Contact

For questions or access issues, contact the project lead.

## ğŸ§ª Running Tests (Pytest without Virtual Environment)

If you prefer to run `pytest` using your global Python installation (without creating a dedicated virtual environment), follow these steps. This can be useful for quick checks but be mindful of potential global package conflicts.

**1. Install Required Packages:**

Make sure you have `pytest` and other necessary libraries installed globally. If you encounter `ImportError` issues related to `langchain` or other packages during testing, you might need to install or upgrade them:

```bash
python -m pip install --upgrade pip
python -m pip install pytest sentence-transformers langchain langchain_experimental langchain-google-genai python-dotenv
```

_(Adjust the list of packages as needed based on your project's specific test dependencies and any `ImportError` messages you see)._

**2. Configure PYTHONPATH (Important for Module Resolution):**

When running `pytest` from the project root, Python might not be able to find your project's internal modules (e.g., those inside `src/backend` or `src/ai`). To fix `ModuleNotFoundError` issues:

- **For Backend Tests:** If your tests import modules from `src/backend/services` or `src/backend/app`, you need to add `src/backend` to your `PYTHONPATH`.
- **For AI Tests:** Similarly, if tests import from `src/ai`, you might need to adjust `PYTHONPATH`.

Example for PowerShell (when running tests that need `src/backend`):

```powershell
$env:PYTHONPATH = "src\backend"
```

Or for bash/zsh:

```bash
export PYTHONPATH="src/backend"
```

You'll need to set this in your terminal session _before_ running `pytest`.

**3. Run Pytest:**

Once packages are installed and `PYTHONPATH` is set correctly for your context, run `pytest` with verbose output:

```powershell
# Example for backend tests (assuming PYTHONPATH is set as above)
python -m pytest -vv
```

If tests are located in a specific directory (e.g., `tests/backend`), you can target them:

```powershell
python -m pytest -vv tests/backend
```

**Troubleshooting `ImportError: cannot import name 'SemanticChunker' from 'langchain.text_splitter'`:**

This specific error means that the `SemanticChunker` has moved. It's now in `langchain_experimental.text_splitter`. Ensure your code imports it correctly:

```python
# Old, incorrect import:
# from langchain.text_splitter import SemanticChunker

# New, correct import:
from langchain_experimental.text_splitter import SemanticChunker
```

Make sure all files using `SemanticChunker` (like `rag_service.py` and `document_processor.py`) are updated. Also, ensure `langchain_experimental` is installed.

## ğŸ“‹ ×¡×§×™×¨×” ×›×œ×œ×™×ª

×”×¤×¨×•×™×§×˜ ×›×•×œ×œ ×©×œ×•×©×” ×¡×•×’×™ ×˜×¡×˜×™×:
- **Frontend Tests** - ×˜×¡×˜×™× ×œ×¦×“ ×”×œ×§×•×— (React/TypeScript)
- **Backend Tests** - ×˜×¡×˜×™× ×œ×¦×“ ×”×©×¨×ª (Python/FastAPI)
- **RAG Tests** - ×˜×¡×˜×™ ××™×›×•×ª ×ª×©×•×‘×•×ª AI ×•××¢×¨×›×ª ×”×—×™×¤×•×©

## ğŸ¯ Frontend Tests

### ××™×§×•×: `src/frontend/tests/`

**3 ×§×‘×¦×™ ×˜×¡×˜ ×¢× 27 ×˜×¡×˜×™×:**

1. **`simple.test.tsx`** (4 ×˜×¡×˜×™×)
   - ×—×™×©×•×‘ ×¡×”"×› ×˜×•×§× ×™×
   - ×œ×•×’×™×§×ª ××¢×‘×¨ ××¤×ª×—×•×ª (60% threshold)
   - ×¡×™×•×•×’ ×¡×˜×˜×•×¡ ××¤×ª×—×•×ª
   - ×¤×•×¨××˜ × ×ª×•× ×™×

2. **`dashboard-logic.test.tsx`** (13 ×˜×¡×˜×™×)
   - ×—×™×©×•×‘×™ ×˜×•×§× ×™× ××•×¨×›×‘×™×
   - ×œ×•×’×™×§×ª switching ×¢× margins ×©×•× ×™×
   - ×¡×™×•×•×’ ××¤×ª×—×•×ª ×œ×¤×™ ×¡×˜×˜×•×¡
   - ××’×¨×’×¦×™×” ×©×œ × ×ª×•× ×™×
   - ×•×•×œ×™×“×¦×™×” ×©×œ × ×ª×•× ×™×

3. **`TokenUsageAnalytics.test.tsx`** (10 ×˜×¡×˜×™×)
   - ×¤×•×¨××˜ ××¡×¤×¨×™× ×¢× ×¤×¡×™×§×™×
   - ×—×™×©×•×‘ ×¡×˜×˜×™×¡×˜×™×§×•×ª
   - ×‘×“×™×§×ª localization (×¢×‘×¨×™×ª/×× ×’×œ×™×ª)
   - ×•×•×œ×™×“×¦×™×” ×©×œ API responses

### ğŸš€ ×”×¨×¦×ª ×˜×¡×˜×™ Frontend:

```bash
# × ×•×•×˜ ×œ×ª×™×§×™×™×ª Frontend
cd src/frontend

# ×”×¨×¥ ××ª ×›×œ ×”×˜×¡×˜×™×
npm test

# ×”×¨×¥ ×‘××¦×‘ watch (××¢×§×‘ ××•×˜×•××˜×™)
npm run test:watch

# ×”×¨×¥ ×˜×¡×˜ ×¡×¤×¦×™×¤×™
npx vitest simple.test.tsx
```

**×–××Ÿ ×¨×™×¦×”**: ~8 ×©× ×™×•×ª  
**×©×™×¢×•×¨ ×”×¦×œ×—×”**: 100% (27/27)

## ğŸ”§ Backend Tests

### ××™×§×•×: `src/tests/backend/`

**9 ×§×‘×¦×™ ×˜×¡×˜ ×¢× 123 ×˜×¡×˜×™×:**

1. **`tests_01_auth.py`** (11 ×˜×¡×˜×™×) - ××™××•×ª ×•×”×¨×©××•×ª
2. **`tests_02_chat_sessions.py`** (14 ×˜×¡×˜×™×) - × ×™×”×•×œ ×¦'××˜
3. **`tests_03_messages.py`** (13 ×˜×¡×˜×™×) - ×˜×™×¤×•×œ ×‘×”×•×“×¢×•×ª
4. **`tests_04_ai_integration.py`** (15 ×˜×¡×˜×™×) - ××™× ×˜×’×¨×¦×™×” ×¢× AI
5. **`tests_05_documents.py`** (17 ×˜×¡×˜×™×) - × ×™×”×•×œ ××¡××›×™× ×•-RAG
6. **`tests_06_security.py`** (16 ×˜×¡×˜×™×) - ××‘×˜×—×”
7. **`tests_07_errors.py`** (13 ×˜×¡×˜×™×) - ×˜×™×¤×•×œ ×‘×©×’×™××•×ª
8. **`tests_08_e2e.py`** (12 ×˜×¡×˜×™×) - ×˜×¡×˜×™ End-to-End
9. **`tests_09_performance.py`** (12 ×˜×¡×˜×™×) - ×‘×™×¦×•×¢×™×

### ğŸš€ ×”×¨×¦×ª ×˜×¡×˜×™ Backend:

```bash
# × ×•×•×˜ ×œ×ª×™×§×™×™×ª ×”×˜×¡×˜×™×
cd src/tests/backend

# ×”×¨×¥ ××ª ×›×œ ×”×˜×¡×˜×™×
python tests_runner.py --all --verbose

# ×”×¨×¥ ×§×˜×’×•×¨×™×” ×¡×¤×¦×™×¤×™×ª
python tests_runner.py --category auth --verbose

# ×”×¨×¥ ×˜×¡×˜ ×¡×¤×¦×™×¤×™
pytest tests_01_auth.py -v
```

**×–××Ÿ ×¨×™×¦×”**: ~11.5 ×“×§×•×ª  
**×©×™×¢×•×¨ ×”×¦×œ×—×”**: 100% (123/123)

## ğŸ§  RAG Tests

### ××™×§×•×: `RAG_test/`

**3 ×¡×˜×™× ×©×œ ×©××œ×•×ª ×¢× 90 ×©××œ×•×ª ×‘×¡×š ×”×›×œ:**

1. **Basic RAG Test Set** (30 ×©××œ×•×ª)
   - ğŸ” ×“×™×•×§ ××¡×¤×¨×™ ×¡×¢×™×¤×™× (8 ×©××œ×•×ª)
   - ğŸ§  ×©××œ×•×ª ×ª×•×›×Ÿ ××•×¨×›×‘×•×ª (8 ×©××œ×•×ª)
   - âš–ï¸ ×©××œ×•×ª ××©××¢×ª (7 ×©××œ×•×ª)
   - ğŸ¤” ×©××œ×•×ª ×××‘×™×’×•××œ×™×•×ª (4 ×©××œ×•×ª)
   - ğŸª¤ ×©××œ×•×ª ××œ×›×•×“×ª (3 ×©××œ×•×ª)

2. **Detailed Accuracy Test Set** (30 ×©××œ×•×ª)
   - ×‘×“×™×§×•×ª ××§×™×¤×•×ª ×©×œ ×“×™×•×§ RAG
   - ×©××œ×•×ª ××•×¨×›×‘×•×ª ×•××¤×•×¨×˜×•×ª

3. **Real Student Questions** (30 ×©××œ×•×ª)
   - ×©××œ×•×ª ×©××“××•×ª ×¤× ×™×•×ª ×××™×ª×™×•×ª ×©×œ ×¡×˜×•×“× ×˜×™×
   - ×ª×¨×—×™×©×™× ××¢×©×™×™× ××”×—×™×™× ×”×××™×ª×™×™×

### ğŸš€ ×”×¨×¦×ª ×˜×¡×˜×™ RAG:

```bash
# × ×•×•×˜ ×œ×ª×™×§×™×™×ª RAG
cd RAG_test

# ×”×¨×¥ ××ª ×›×œ ×”×˜×¡×˜×™× (90 ×©××œ×•×ª)
python test_runner.py

# ×“×™×‘×•×’ ××”×™×¨
python debug_rag.py
```

**×“×¨×™×©×•×ª**:
- ××©×ª× ×™ ×¡×‘×™×‘×”: `GEMINI_API_KEY`, `SUPABASE_URL`, `SUPABASE_KEY`
- ××¡×“ × ×ª×•× ×™× Supabase ×¢× ××¡××›×™× ××¢×•×‘×“×™×

**×–××Ÿ ×¨×™×¦×”**: ~13 ×“×§×•×ª  
**×¤×¨×•×¤×™×œ×™× ×–××™× ×™×**: 9 ×¤×¨×•×¤×™×œ×™ ×ª×¦×•×¨×” ×©×•× ×™×

### ğŸ“Š ×“×•×—×•×ª RAG:
- `test_report_[timestamp].txt` - ×“×•×— ××¤×•×¨×˜ ×‘×¢×‘×¨×™×ª
- `chunks_analysis_[timestamp].txt` - × ×™×ª×•×— ×¦'×× ×§×™×
- `rag_settings_[timestamp].json` - ×”×’×“×¨×•×ª ××¢×¨×›×ª
- `raw_results_[timestamp].json` - × ×ª×•× ×™× ×’×•×œ××™×™×

## ğŸ¯ ×”×¨×¦×ª ×›×œ ×”×˜×¡×˜×™×

### ×¡×§×¨×™×¤×˜ ××”×™×¨ ×œ×”×¨×¦×ª ×”×›×œ:

```bash
# Frontend Tests
cd src/frontend && npm test

# Backend Tests  
cd ../../src/tests/backend && python tests_runner.py --all

# RAG Tests
cd ../../../RAG_test && python test_runner.py
```

## ğŸ“Š ×¡×™×›×•× ×›×•×œ×œ

### **240 ×˜×¡×˜×™× ×‘×¡×š ×”×›×œ:**
- âœ… **Frontend**: 27 ×˜×¡×˜×™× (8 ×©× ×™×•×ª)
- âœ… **Backend**: 123 ×˜×¡×˜×™× (11.5 ×“×§×•×ª)
- âœ… **RAG**: 90 ×©××œ×•×ª (13 ×“×§×•×ª)

### **×–××Ÿ ×¨×™×¦×” ×›×•×œ×œ**: ~25 ×“×§×•×ª

## ğŸ”§ ×“×¨×™×©×•×ª ××¢×¨×›×ª

### Frontend:
- Node.js 16+
- npm ××• yarn
- Dependencies: `@testing-library/react`, `@testing-library/jest-dom`

### Backend:
- Python 3.8+
- pytest
- pytest-json-report
- ×›×œ ×”×ª×œ×•×™×•×ª ×-`requirements.txt`

### RAG:
- Python 3.8+
- Gemini API Key
- Supabase Database
- ××¡××›×™× ××¢×•×‘×“×™× ×‘××¡×“ ×”× ×ª×•× ×™×

## ğŸ› ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª

### ×©×’×™××•×ª × ×¤×•×¦×•×ª:

**Frontend**: `Module not found`
```bash
cd src/frontend && npm install
```

**Backend**: `pytest not found`
```bash
pip install pytest pytest-json-report
```

**RAG**: `supabase_url is required`
```bash
# ×‘×“×•×§ ×§×•×‘×¥ .env ×‘×©×•×¨×© ×”×¤×¨×•×™×§×˜
SUPABASE_URL=your_url
SUPABASE_KEY=your_key
GEMINI_API_KEY=your_key
```

## ğŸ“ˆ ××“×“×™ ×”×¦×œ×—×”

- **Frontend**: 100% pass rate (27/27)
- **Backend**: 100% pass rate (123/123)
- **RAG**: ×ª×œ×•×™ ×‘×ª×¦×•×¨×” (××˜×¨×”: 80%+)

## ğŸ”„ ×”×¨×¦×” ×ª×§×•×¤×ª×™×ª

××•××œ×¥ ×œ×”×¨×™×¥:
- **Frontend**: ×œ×¤× ×™ ×›×œ commit
- **Backend**: ×œ×¤× ×™ ×›×œ deployment
- **RAG**: ××—×ª ×œ×©×‘×•×¢ ××• ×œ××—×¨ ×©×™× ×•×™×™ ×ª×•×›×Ÿ

---

**× ×•×¦×¨ ×•×¢×•×“×›×Ÿ ×¢×œ ×™×“×™ ××¢×¨×›×ª ×”×‘×“×™×§×” ×”××•×˜×•××˜×™×ª** ğŸ“
